<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Movie</title>
    <style th:replace="~{fragments/fragment :: base-styling}"></style>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>


    <style>
        #form-page-container {
           font-family: Arial, sans-serif;
           max-width: 600px;
           margin: 0 auto;
           padding: 20px;
       }
       .form-container {
           background-color: #f5f5f5;
           padding: 20px;
           border-radius: 5px;
       }
       form div {
           margin-bottom: 15px;
       }
       label {
           display: inline-block;
           width: 150px;
       }
       input[type="text"], input[type="number"] {
           width: 200px;
           padding: 5px;
       }
       button {
           background-color: #4CAF50;
           color: white;
           padding: 10px 20px;
           border: none;
           border-radius: 4px;
           cursor: pointer;
       }
       a {
           display: inline-block;
           margin-top: 20px;
           color: #666;
           text-decoration: none;
       }

        .error{
        color:red
        }
    </style>
</head>
<body>

    
    <div th:replace="~{fragments/fragment :: navbar}"></div>


    <div id="form-page-container">
        <h2 class="error" th:if="${error}" th:text="${error}"></h2>
        <div class="form-container">
            <form th:action="${movie.id == null} ? @{/movies/create} : @{/movies/update/{id}(id=${movie.id})}" method="post" th:object="${movie}">
                <h1 th:text="${movie.id == null} ? 'Create A New Movie' : 'Update Movie Details' "></h1>

                <div>
                    <label for="title">Title: </label>
                    <input th:field="*{title}" required  type="text" id="title" minlength="5" maxlength="255" >

                </div>

                <div>
                    <label for="duration">Duration: </label>
                    <input th:field="*{duration}" required type="number" id="duration" max="500" min="90" >

                </div>

                <div>
                    <label for="release-year">Release Year: </label>
                    <input  th:field="*{releaseYear}" required type="number" id="release-year" max="2080" >

                </div>




                <div>
                    <label for="genres">Director: </label>
                    <select name="genreIds" id="genres" required multiple>
                        <option value="">Select a Genre</option>
                        <option th:each="genre : ${genres}"
                                th:text="${genre.name}"
                                th:value="${genre.genreId}"
                        ></option>
                    </select>

                </div>

                <div>
                    <label for="director">Director: </label>
                    <select th:field="*{director}" id="director" required>
                        <option value="">Select a Director</option>
                        <option th:each="director : ${directors}"
                                th:text="${director.firstName} + ' ' + ${director.lastName}"
                                th:value="${director.directorId}"
                        ></option>
                    </select>

                </div>

                <div>
                    <label for="language">Language: </label>
                    <input  th:field="*{language}" type="text" id="language" minlength="3" maxlength="30" >

                </div>

                <div>
                    <label for="won-oscars">Won Oscars: </label>
                    <input  th:field="*{wonOscars}" type="checkbox" id="won-oscars" >

                </div>








                <button th:text="${movie.id} == null ? 'Create Movie' : 'Update Movie'" type="submit"></button>

            </form>
        </div>
    </div>




    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#genres').select2();
        });
    </script>
    
</body>
</html>